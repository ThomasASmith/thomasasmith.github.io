<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assign locations to clusters in a CRT — specify_clusters • CRTspat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assign locations to clusters in a CRT — specify_clusters"><meta name="description" content="specify_clusters algorithmically assigns locations to clusters by grouping them geographically"><meta property="og:description" content="specify_clusters algorithmically assigns locations to clusters by grouping them geographically"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CRTspat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Usecase1.html">Use Case 01: Algorithmic specification of clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase2.html">Use Case 02: Simulation of trials with geographical spillover</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase3.html">Use Case 03: Estimation of intracluster correlations (ICC) by cluster size</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase4.html">Use Case 04: Estimation of optimal cluster size for a trial with pre-determined buffer width</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase5.html">Use Case 05: Analysis of trials (including methods for analysing spillover)</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase6.html">Use Case 06: Thematic mapping of the geography of a CRT</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase7.html">Use Case 07: Power and sample size calculations allowing for spillover</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase8.html">Use Case 08: Eggs - to fry or scramble?</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase9.html">Use Case 09: Preparation of datasets for `CRTspat`</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Assign locations to clusters in a CRT</h1>

      <div class="d-none name"><code>specify_clusters.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>specify_clusters</code> algorithmically assigns locations to clusters by grouping them geographically</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">specify_clusters</span><span class="op">(</span></span>
<span>  trial <span class="op">=</span> <span class="va">trial</span>,</span>
<span>  c <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  h <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="st">"NN"</span>,</span>
<span>  reuseTSP <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  auxiliary <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-trial">trial<a class="anchor" aria-label="anchor" href="#arg-trial"></a></dt>
<dd><p>A CRT object or data frame containing (x,y) coordinates of
households</p></dd>


<dt id="arg-c">c<a class="anchor" aria-label="anchor" href="#arg-c"></a></dt>
<dd><p>integer: number of clusters in each arm</p></dd>


<dt id="arg-h">h<a class="anchor" aria-label="anchor" href="#arg-h"></a></dt>
<dd><p>integer: number of locations per cluster</p></dd>


<dt id="arg-algorithm">algorithm<a class="anchor" aria-label="anchor" href="#arg-algorithm"></a></dt>
<dd><p>algorithm for cluster boundaries, with options:</p><table class="table table"><tr><td><code>NN</code></td><td>Nearest neighbour: assigns equal numbers of locations to each cluster</td></tr><tr><td><code>kmeans</code></td><td>kmeans clustering: aims to partition locations so that each
belongs to the cluster with the nearest centroid.</td></tr><tr><td><code>TSP</code></td><td>travelling salesman problem heuristic: Assigns locations sequentially
along a travelling salesman path.</td></tr></table></dd>


<dt id="arg-reusetsp">reuseTSP<a class="anchor" aria-label="anchor" href="#arg-reusetsp"></a></dt>
<dd><p>logical: indicator of whether a pre-existing path should be used by
the TSP algorithm</p></dd>


<dt id="arg-auxiliary">auxiliary<a class="anchor" aria-label="anchor" href="#arg-auxiliary"></a></dt>
<dd><p><code>"CRTsp"</code> object containing external cluster and or arm assignments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class <code>"CRTsp"</code> containing the following components:</p><table class="table table"><tr><td><code>geom_full</code></td><td>list:</td><td>summary statistics describing the site,
and cluster assignments.</td></tr><tr><td><code>trial</code></td><td>data frame:</td><td>rows correspond to geolocated points, as follows:</td></tr><tr><td></td><td><code>x</code></td><td>numeric vector: x-coordinates of locations</td></tr><tr><td></td><td><code>y</code></td><td>numeric vector: y-coordinates of locations</td></tr><tr><td></td><td><code>cluster</code></td><td>factor: assignments to cluster of each location</td></tr><tr><td></td><td><code>...</code></td><td>other objects included in the input <code>"CRTsp"</code> object or data frame</td></tr></table></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Either <code>c</code> or <code>h</code> must be specified. If both are specified
the input value of <code>c</code> is ignored.<br><br>
The <code>reuseTSP</code> parameter is used to allow the path to be reused
for creating alternative allocations with different cluster sizes.<br><br>
If an auxiliary <code>auxiliary</code> <code>"CRTsp"</code> object is specified then the other options are ignored
and the cluster assignments (and arm assignments if available) are taken from the auxiliary object.
The trial data frame is augmented with a column <code>"nearestPixel"</code> containing the distance to boundary of the nearest
grid pixel in the auxiliary. If the auxiliary is a grid with <code>design$geometry</code> set to <code>'triangle'</code>,
<code>'square'</code> or <code>'hexagon'</code> then the distance is computed to the edge of the nearest grid pixel in the discordant arm
(using a circular approximation for the perimeter) rather than to the point location itself. If the point is within
the pixel then the distance is given a negative sign.<br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Assign clusters of average size h = 40 to a test set of co-ordinates, using the kmeans algorithm</span></span></span>
<span class="r-in"><span><span class="va">exampletrial</span> <span class="op">&lt;-</span> <span class="fu">specify_clusters</span><span class="op">(</span>trial <span class="op">=</span> <span class="fu"><a href="readdata.html">readdata</a></span><span class="op">(</span><span class="st">'exampleCRT.txt'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            h <span class="op">=</span> <span class="fl">40</span>, algorithm <span class="op">=</span> <span class="st">'kmeans'</span>, reuseTSP <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

