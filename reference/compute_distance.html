<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute distance or surround values for a cluster randomized trial — compute_distance • CRTspat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute distance or surround values for a cluster randomized trial — compute_distance"><meta name="description" content="compute_distance computes distance or surround values for a cluster randomized trial (CRT)"><meta property="og:description" content="compute_distance computes distance or surround values for a cluster randomized trial (CRT)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CRTspat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Usecase1.html">Use Case 01: Algorithmic specification of clusters</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase10.html">Use Case 10: Power sample size and bias calculations using a diffusion model for spillover</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase2.html">Use Case 02: Simulation of trials with geographical spillover</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase3.html">Use Case 03: Estimation of intracluster correlations (ICC) by cluster size</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase4.html">Use Case 04: Estimation of optimal cluster size for a trial with pre-determined buffer width</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase5.html">Use Case 05: Analysis of trials (including methods for analysing spillover)</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase6.html">Use Case 06: Thematic mapping of the geography of a CRT</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase7.html">Use Case 07: Power and sample size calculations allowing for spillover</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase8.html">Use Case 08: Eggs - to fry or scramble?</a></li>
    <li><a class="dropdown-item" href="../articles/Usecase9.html">Use Case 09: Preparation of datasets for `CRTspat`</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute distance or surround values for a cluster randomized trial</h1>

      <div class="d-none name"><code>compute_distance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>compute_distance</code> computes distance or surround values for a cluster randomized trial (CRT)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compute_distance</span><span class="op">(</span></span>
<span>  <span class="va">trial</span>,</span>
<span>  distance <span class="op">=</span> <span class="st">"nearestDiscord"</span>,</span>
<span>  scale_par <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auxiliary <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-trial">trial<a class="anchor" aria-label="anchor" href="#arg-trial"></a></dt>
<dd><p>an object of class <code>"CRTsp"</code> or a data frame containing locations in (x,y) coordinates, cluster
assignments (factor <code>cluster</code>), and arm assignments (factor <code>arm</code>).</p></dd>


<dt id="arg-distance">distance<a class="anchor" aria-label="anchor" href="#arg-distance"></a></dt>
<dd><p>the quantity(s) to be computed. Options are:</p><table class="table table"><tr><td><code>"nearestDiscord"</code></td><td>distance to nearest discordant location (km)</td></tr><tr><td><code>"distanceAssigned"</code></td><td>distance to the nearest pixel in the assigned cluster (km)</td></tr><tr><td><code>"disc"</code></td><td>disc</td></tr><tr><td><code>"kern"</code></td><td>kernel-based measure</td></tr><tr><td><code>"hdep"</code></td><td>Tukey half space depth</td></tr><tr><td><code>"sdep"</code></td><td>simplicial depth</td></tr></table></dd>


<dt id="arg-scale-par">scale_par<a class="anchor" aria-label="anchor" href="#arg-scale-par"></a></dt>
<dd><p>scale parameter equal to the disc radius in km if <code>distance = "disc"</code>
or to the standard deviance of the kernels if <code>distance = "kern"</code></p></dd>


<dt id="arg-auxiliary">auxiliary<a class="anchor" aria-label="anchor" href="#arg-auxiliary"></a></dt>
<dd><p><code>"CRTsp"</code> object containing external cluster and or arm assignments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input <code>"CRTsp"</code> object with additional column(s) added to the <code>trial</code> data frame
with variable name corresponding to the input value of <code>distance</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each selected distance measure, the function first checks whether the variable is already present, and carries out
the calculations only if the corresponding field is absent from the <code>trial</code> data frame.<br><br>
If <code>distance = "nearestDiscord"</code> is selected the computed values are Euclidean distances
assigned a positive sign for the intervention arm of the trial, and a negative sign for the control arm.<br><br>
If <code>distance = "distanceAssigned"</code> is selected the computed values are Euclidean distances
to the nearest pixel in the <code>auxiliary</code> <code>"CRTsp"</code> object.<br><br>
If <code>distance = "disc"</code> is specified, the disc statistic is computed for each location as the number of locations
within the specified radius that are in the intervention arm
(<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/biom.13316" class="external-link">Anaya-Izquierdo &amp; Alexander(2020)</a>). The input
value of <code>scale_par</code> is stored in the <code>design</code> list
of the output <code>"CRTsp"</code> object. Recalculation is carried out if the input value of
<code>scale_par</code> differs from the one in the input <code>design</code> list. The value of the the surround calculated
based on intervened locations is divided by the value of the surround calculated on the basis of all locations, so the
value returned is a proportion.<br><br>
If <code>distance = "kern"</code> is specified, the Normal curve with standard deviation
<code>scale_par</code> is used to simulate diffusion of the intervention effect by Euclidean
distance. For each location in the trial, the contributions of all intervened locations are
summed. As with <code>distance = "disc"</code>, when <code>distance = "kern"</code> the surround calculated
based on intervened locations is divided by the value of the surround calculated on the basis of all locations, so the
value returned is a proportion.<br><br>
If either <code>distance = "hdep"</code> or <code>distance = "sdep"</code> is specified then both the simplicial depth and
Tukey half space depth are calculated using the algorithm of
<a href="https://www.jstor.org/stable/2986073" class="external-link">Rousseeuw &amp; Ruts(1996)</a>. The half-depth probability within the intervention cloud (di) is computed
with respect to other locations in the intervention arm (<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/biom.13316" class="external-link">Anaya-Izquierdo &amp; Alexander(2020)</a>). The half-depth within
the half-depth within the control cloud (dc) is also computed. <code>CRTspat</code> returns the proportion di/(dc + di). <br><br>
If an auxiliary <code>auxiliary</code> <code>"CRTsp"</code> object is specified then either <code>distanceAssigned</code> or <code>nearestDiscord</code> (the default)
is computed with respect to the assignments in the auxiliary. If the auxiliary is a grid with <code>design$geometry</code> set to <code>'triangle'</code>,
<code>'square'</code> or <code>'hexagon'</code> then the distance is computed to the edge of the nearest grid pixel in the discordant arm
(using a circular approximation for the perimeter) rather than to the point location itself.<br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Calculate the disc with a radius of 0.5 km</span></span></span>
<span class="r-in"><span><span class="va">exampletrial</span> <span class="op">&lt;-</span> <span class="fu">compute_distance</span><span class="op">(</span>trial <span class="op">=</span> <span class="fu"><a href="readdata.html">readdata</a></span><span class="op">(</span><span class="st">'exampleCRT.txt'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>distance <span class="op">=</span> <span class="st">'disc'</span>, scale_par <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

